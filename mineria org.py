# -*- coding: utf-8 -*-
"""mineria.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1qeG8CpHa386wRVlAmDZMknvLF7IW-Hel
"""

# Commented out IPython magic to ensure Python compatibility.
# %%writefile streamlit_app.py
# import pandas as pd
# import streamlit as st
# import matplotlib.pyplot as plt
# 
# # ConfiguraciÃ³n general
# st.set_page_config(page_title="Dashboard Universitario", layout="wide")
# st.title("ğŸ“Š Dashboard de RetenciÃ³n y SatisfacciÃ³n Estudiantil")
# 
# # Cargar datos desde el archivo CSV
# df = pd.read_csv('/content/university_student_data.csv')
# 
# # Renombrar columnas a espaÃ±ol para que coincidan con el resto del cÃ³digo
# df = df.rename(columns={
#     "Year": "AÃ±o",
#     "Department": "Departamento",
#     "Term": "Periodo",
#     "RetentionRate": "Tasa de retencion",
#     "SatisfactionScore": "Puntaje de satisfacciÃ³n"
# })
# 
# # ğŸ›ï¸ Filtros interactivos
# st.sidebar.header("Filtros")
# year = st.sidebar.multiselect("Selecciona AÃ±o(s)", sorted(df["AÃ±o"].unique()), default=df["AÃ±o"].unique())
# department = st.sidebar.multiselect("Selecciona Departamento(s)", df["Departamento"].unique(), default=df["Departamento"].unique())
# term = st.sidebar.multiselect("Selecciona Periodo(s)", df["Periodo"].unique(), default=df["Periodo"].unique())
# 
# # Aplicar filtros
# df_filtered = df[(df["AÃ±o"].isin(year)) & (df["Departamento"].isin(department)) & (df["Periodo"].isin(term))]
# 
# # ğŸ“ˆ KPIs
# avg_retention = df_filtered["Tasa de retencion"].mean() * 100
# avg_satisfaction = df_filtered["Puntaje de satisfacciÃ³n"].mean()
# max_retention = df_filtered["Tasa de retencion"].max() * 100
# 
# col1, col2, col3 = st.columns(3)
# col1.metric("Tasa promedio de retenciÃ³n", f"{avg_retention:.1f}%")
# col2.metric("Puntaje promedio de satisfacciÃ³n", f"{avg_satisfaction:.2f}/5")
# col3.metric("MÃ¡xima tasa de retenciÃ³n", f"{max_retention:.1f}%")
# 
# st.markdown("---")
# 
# # ğŸ“Š VisualizaciÃ³n 1: Tendencia de RetenciÃ³n por AÃ±o
# st.subheader("ğŸ“ˆ Tendencia de Tasa de RetenciÃ³n por AÃ±o")
# fig1, ax1 = plt.subplots(figsize=(8, 4))
# for dept in df_filtered["Departamento"].unique():
#     df_dept = df_filtered[df_filtered["Departamento"] == dept]
#     ax1.plot(df_dept["AÃ±o"], df_dept["Tasa de retencion"] * 100, marker="o", label=dept)
# ax1.set_title("Tasa de RetenciÃ³n por Departamento y AÃ±o")
# ax1.set_xlabel("AÃ±o")
# ax1.set_ylabel("RetenciÃ³n (%)")
# ax1.legend()
# ax1.grid(True)
# st.pyplot(fig1)
# 
# # VisualizaciÃ³n 2: ComparaciÃ³n de SatisfacciÃ³n por Departamento
# st.subheader(" ComparaciÃ³n de SatisfacciÃ³n Estudiantil por Departamento")
# fig2, ax2 = plt.subplots(figsize=(8, 4))
# df_grouped = df_filtered.groupby("Departamento")["Puntaje de satisfacciÃ³n"].mean().sort_values()
# ax2.barh(df_grouped.index, df_grouped.values, color="#69b3a2")
# ax2.set_xlabel("SatisfacciÃ³n Promedio (1â€“5)")
# ax2.set_ylabel("Departamento")
# ax2.set_title("SatisfacciÃ³n Estudiantil Promedio por Departamento")
# st.pyplot(fig2)
# 
# # VisualizaciÃ³n 3: DistribuciÃ³n por Periodo (Spring/Fall)
# st.subheader(" DistribuciÃ³n de Registros por Periodo AcadÃ©mico")
# fig3, ax3 = plt.subplots(figsize=(5, 5))
# term_counts = df_filtered["Periodo"].value_counts()
# ax3.pie(term_counts, labels=term_counts.index, autopct="%1.1f%%", startangle=90, colors=["#4169E1", "#FFA500"])
# ax3.set_title("ProporciÃ³n de Estudiantes por Periodo")
# st.pyplot(fig3)
# 
# # Datos en pestaÃ±as
# tab1, tab2 = st.tabs(["ğŸ“„ Datos filtrados", "ğŸ“š Datos completos"])
# with tab1:
#     st.dataframe(df_filtered.reset_index(drop=True), width='stretch')
# with tab2:
#     st.dataframe(df, width='stretch')
# 
# st.caption("Usa los filtros de la izquierda para explorar los datos por aÃ±o, departamento o periodo acadÃ©mico.")
# 
# # ğŸ’¬ InteracciÃ³n de ejemplo (cÃ³digo adicional que solicitaste)
# st.subheader("ğŸ’¬ InteracciÃ³n de ejemplo")
# user_input = st.text_input("Escribe algo aquÃ­:", "Hola Streamlit!")
# st.write(f"Has escrito: {user_input}")